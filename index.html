<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Play</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="wrapper.css" />
</head>
<body>
  <div id="wrap">
    <div id="stage">
      <iframe id="gameframe" allow="autoplay; fullscreen"></iframe>

      <!-- Starter: required on mobile so audio + focus work -->
      <div id="starter" role="dialog" aria-modal="true">
        <div class="card">
          <div class="title">Ready?</div>
          <div class="sub">Tap to focus & enable audio</div>
          <button id="startBtn" class="btn pill">Tap to Start</button>
        </div>
      </div>

      <!-- Top HUD: controls toggle + settings -->
      <div id="topbar">
        <button id="toggleControls" class="btn ghost" aria-pressed="false" title="Hide/Show Controls">üéÆ</button>
        <button id="openSettings" class="btn ghost" title="Settings">‚öôÔ∏è</button>
      </div>
    </div>

    <!-- Bottom controls -->
    <div id="controls" aria-label="Touch Controls">
      <div id="controlInner" class="layout-center">
        <div class="dpad" id="dpad" aria-label="D-pad">
          <button class="seg up"    data-key="ArrowUp"    aria-label="Up"></button>
          <button class="seg left"  data-key="ArrowLeft"  aria-label="Left"></button>
          <button class="seg right" data-key="ArrowRight" aria-label="Right"></button>
          <button class="seg down"  data-key="ArrowDown"  aria-label="Down"></button>
          <div class="nub"></div>
        </div>

        <div class="actions">
          <button class="btn action A" data-key="Space" aria-label="A (Space)">A</button>
          <button class="btn action B" data-key="Enter" aria-label="B (Enter)">B</button>
          <button class="btn action full" id="fullscreenBtn" aria-label="Fullscreen">‚§¢</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings panel -->
  <dialog id="settings">
    <form method="dialog">
      <h3>Controls</h3>
      <label class="row">
        <span>Left-handed layout</span>
        <input id="lefty" type="checkbox" />
      </label>
      <label class="row">
        <span>UI size</span>
        <input id="uisize" type="range" min="0.8" max="1.6" step="0.05" />
      </label>
      <label class="row">
        <span>UI opacity</span>
        <input id="uiopacity" type="range" min="0.2" max="1.0" step="0.05" />
      </label>
      <div class="row buttons">
        <button class="btn pill">Close</button>
        <button id="resetPrefs" class="btn pill ghost" type="button">Reset</button>
      </div>
      <p class="hint">Tip: host <code>index.html</code> and your game file on the same domain for the keys to work.</p>
    </form>
  </dialog>

  <script defer src="wrapper.js"></script>
</body>
</html>
